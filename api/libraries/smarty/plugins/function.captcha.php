<?php
 function smarty_function_captcha($param=array(), &$smarty) { $param['length'] = !empty($param['length'])?$param['length']:'6'; $param['base'] = !empty($param['base'])?$param['base']: '/plugins/captcha/captcha.jsp'; $param['mode'] = !empty($param['mode'])?$param['mode']:'image'; $captcha=''; $rand = microtime(); switch($param['mode']) { case 'image': $captcha="<img src='{$param['base']}?t={$rand}' height='40' width='120' alt='Mã bảo vệ' title='Mã bảo vệ'>"; break; case 'math': $captcha="<img src='{$param['base']}?t={$rand}&mode=math' height='120' width='40' alt='Mã bảo vệ' title='Mã bảo vệ'>"; break; case 'input': default: $captcha="<input name='security_code' id='security_code' type='text' class='input w150' value=''>"; break; } return($captcha); } ?>