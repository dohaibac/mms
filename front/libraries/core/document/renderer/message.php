<?php
 defined('JPATH_PLATFORM') or die; class JDocumentRendererMessage extends JDocumentRenderer { public function render($name, $params = array(), $content = null) { $msgList = $this->getData(); $displayData = array( 'msgList' => $msgList, 'name' => $name, 'params' => $params, 'content' => $content ); $app = JFactory::getApplication(); $chromePath = JPATH_THEMES . '/' . $app->getTemplate() . '/html/message.php'; if (file_exists($chromePath)) { include_once $chromePath; } if (function_exists('renderMessage')) { JLog::add('renderMessage() is deprecated. Override system message rendering with layouts instead.', JLog::WARNING, 'deprecated'); return renderMessage($msgList); } return JLayoutHelper::render('joomla.system.message', $displayData); } private function getData() { $lists = array(); $messages = JFactory::getApplication()->getMessageQueue(); if (is_array($messages) && !empty($messages)) { foreach ($messages as $msg) { if (isset($msg['type']) && isset($msg['message'])) { $lists[$msg['type']][] = $msg['message']; } } } return $lists; } }